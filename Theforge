-- ===== Config =====
_G.targetPickaxes = _G.targetPickaxes or {
    "Arcane Pickaxe",
    "Magma Pickaxe",
    "Demonic Pickaxe"
}

-- à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸à¸²à¸£à¹€à¸ªà¸£à¹‡à¸ˆ: à¸•à¹‰à¸­à¸‡à¸¡à¸µ Demonic Pickaxe + à¹€à¸‡à¸´à¸™ 500000
_G.completionPickaxe = _G.completionPickaxe or "Demonic Pickaxe"
_G.completionGold = _G.completionGold or 500000

-- ===== Wait Game + Horst =====
repeat task.wait(5) until game:IsLoaded()
repeat task.wait(.1) until _G.Horst_SetDescription and _G.Horst_AccountChangeDone

-- ===== Services =====
local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local plr = Players.LocalPlayer

local Shared = ReplicatedStorage:WaitForChild("Shared")
local Equipments = require(ReplicatedStorage.Shared.Data.Equipments)

local Knit = require(Shared.Packages.Knit)
local PlayerController = Knit.GetController("PlayerController")
local Replica = PlayerController.Replica

-- ===== Wait for Data =====
print("â³ Waiting for Replica.Data...")
repeat task.wait(0.5) until Replica.Data and Replica.Data.Inventory and Replica.Data.Inventory.Equipments
print("âœ… Replica.Data loaded!")

-- ===== Helper Functions =====
local function hasPickaxe(pickaxeName, inventory)
    if not inventory then return false end
    for _, item in pairs(inventory) do
        if typeof(item) == "table" and item.Name == pickaxeName then
            return true
        end
    end
    return false
end

-- ===== Main Loop =====
print("â›ï¸ Starting Pickaxe & Gold Check...")
print("ğŸ¯ Target: " .. _G.completionPickaxe .. " + " .. _G.completionGold .. " Gold")

while true do
    task.wait(10)
    
    if not Replica.Data or not Replica.Data.Inventory then
        warn("âš ï¸ Data not ready")
        continue
    end
    
    local Gold = Replica.Data.Gold or 0
    local Race = Replica.Data.Race or "None"
    local inventory = Replica.Data.Inventory.Equipments
    
    local pickaxeStatus = {}
    local hasDemonic = false
    
    -- Check each target pickaxe
    for _, targetName in ipairs(_G.targetPickaxes) do
        local found = hasPickaxe(targetName, inventory)
        
        if found then
            table.insert(pickaxeStatus, "âœ… " .. targetName)
            if targetName == _G.completionPickaxe then
                hasDemonic = true
            end
        else
            table.insert(pickaxeStatus, "âŒ " .. targetName)
        end
    end
    
    -- Build message
    local statusText = table.concat(pickaxeStatus, ", ")
    local message = string.format(
        "ğŸ§¬ Race: %s , %s , ğŸ’° Gold: %d",
        Race,
        statusText,
        Gold
    )
    
    -- Build JSON
    local jsonData = {
        Name = plr.Name,
        Race = Race,
        Gold = Gold,
        ArcanePickaxe = hasPickaxe("Arcane Pickaxe", inventory),
        MagmaPickaxe = hasPickaxe("Magma Pickaxe", inventory),
        DemonicPickaxe = hasPickaxe("Demonic Pickaxe", inventory)
    }
    
    print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
    print("ğŸ“Š Status:")
    print("  ğŸ§¬ Race:", Race)
    print("  ğŸ’° Gold:", Gold, "/", _G.completionGold)
    for _, status in ipairs(pickaxeStatus) do
        print("  " .. status)
    end
    
    -- Send to Horst
    pcall(function()
        _G.Horst_SetDescription(message, HttpService:JSONEncode(jsonData))
    end)
    print("ğŸ“¤ Description sent!")
    
    -- Check if done: à¸•à¹‰à¸­à¸‡à¸¡à¸µ Demonic Pickaxe + à¹€à¸‡à¸´à¸™à¸„à¸£à¸š
    if hasDemonic and Gold >= _G.completionGold then
        print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
        print("ğŸ¯ à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!")
        print("  âœ… à¸¡à¸µ " .. _G.completionPickaxe)
        print("  âœ… à¹€à¸‡à¸´à¸™ " .. Gold .. " / " .. _G.completionGold)
        print("â³ à¸£à¸­ 5 à¸§à¸´à¸™à¸²à¸—à¸µ à¸à¹ˆà¸­à¸™à¸ªà¹ˆà¸‡ DONE...")
        task.wait(5)
        
        local ok, err = _G.Horst_AccountChangeDone()
        if ok then
            print("âœ… à¸ªà¹ˆà¸‡à¸ªà¸–à¸²à¸™à¸° DONE à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!")
            print("ğŸ‰ à¸šà¸±à¸à¸Šà¸µà¸™à¸µà¹‰à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸¡à¸šà¸¹à¸£à¸“à¹Œà¹à¸¥à¹‰à¸§")
        else
            warn("âŒ à¸ªà¹ˆà¸‡à¸ªà¸–à¸²à¸™à¸° DONE à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ:", err)
        end
        break
    else
        -- à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸²à¸‚à¸²à¸”à¸­à¸°à¹„à¸£
        if not hasDemonic then
            print("  â³ à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µ " .. _G.completionPickaxe)
        end
        if Gold < _G.completionGold then
            print("  â³ à¸¢à¸±à¸‡à¸‚à¸²à¸”à¹€à¸‡à¸´à¸™ " .. (_G.completionGold - Gold))
        end
    end
    
    print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
end

print("ğŸ Script finished!")
